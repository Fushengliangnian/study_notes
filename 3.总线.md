## 总线

印刷电路板(待百度)

bus 总线是连接各个部件的信息传输线, 是各个部件共享的传输介质

## 总线上信息的传输

### 串行



### 并行 



### 面向CPU的双总线结构框图



### 以存储器为中心的双总线结构框图



## 总线的分类

### 片内总线

- 芯片内部的总线

### 系统总线: 计算机各部件之间的信息传输线

- 数据总线

  - 数据信号
  - 双向 - 与机器字长, 存储字长相关

- 地址总线

  - 由CPU/主设备发出
  - 单向
  - 与存储地址, I/O地址有关

- 控制总线

  - 有出 有入
  - 列如:CPU出: 存储器读,写操作; 总线允许,中断确认;  
    IO送入CPU: 允许 中断

### 通信总线

- 用于计算机系统之间或计算机系统与其他系统之间的通信

- 传输方式:
  - 串行通信总线
  - 并行通信总线

## 总线特性及性能指标

### 总线物理实现

### 总线特性

- 机械特性
  - 尺寸/形状/管脚数/排列顺序
- 电气特性
  - 传输方向 和有效的电平范围
- 功能特性
  - 每根传输线的功能:
    - 地址
    - 数据
    - 控制
- 时间特性
  - 信号的时序关系

### 总线的性能指标
- 总线宽度
  
  - 数据线的根数
  
- 标准传输率

  - 每秒传输的最大字节数(MBps)

- 时钟同步/异步

  - 同步, 不同步

- 总线复用

  - 地址线与数据线的复用
  - 8086

- 信号线数

  - 地址线, 数据线, 控制线的总和

- 总线控制方式

  - 突发/自动/仲裁/逻辑/计数

- 其他指标

  - 负载能力等

### 总线标准

- 标准界面
  - 模块之间的连接
  - 系统之间的连接
- 总线标准
  - ISA
  - EISA
  - VESA
  - PCI
  - AGP
  - RS0-232
  - USB



  

## 总线结构

### 单总线结构

### 多总线结构

- 双总线结构
- 三总线结构
  - 一
  - 二
- 四总线结构

### 总线结构举例

- 传统微型机总线结构
- VL-BUS局部总线结构
- PCI 总线结构

### 多层PCI总线结构

## 总线控制

### 判优控制

- 基本概念:
  - 主设备(模块) 对总线有控制权
  - 从设备(模块) 响应 从主设备发来的总线命令
  - 总线判优控制
    - 集中式
      - 链式查询
        - BS 总线忙
        - BR 总线请求
        - BG 总线同意
      - 计数器定时查询
        - BS 总线忙
        - BR 总线请求
        - 需要 log2 n
      - 独立请求方式
        - BG 总线同意
        - BR 总线请求
        - 需要2n条线
    - 分布式

### 总线通信控制

- 目的:解决通信双方的协调配合问题
- 总线传输周期
  - 申请分配阶段 主模块申请, 总线仲裁决定
  - 寻址阶段  主模块向从模块给出地址和命令
  - 传数阶段  主模块和从模块 交换数据
  - 结束阶段  主模块/从模块撤销有关信息
- 通信的四种方式
  - 同步通信 
    - 由统一时标 控制数据传送
    - 定宽定距的时标
  - 异步
    - 采用应答方式, 没有公共时钟标准
  - 半同步
    - 同步，异步结合
    - 同步 发送发用系统时钟前沿发信号; 接受方用系统时钟后沿判断,识别
    - 异步 允许不同速度的模块和谐工作; 增加一条 等待 响应信号 wait
  - 分离式
    - 充分挖掘系统总线每个瞬间的潜力
    - 一个总线传输周期
      - 子周期1:
        - 主模块申请占用总线, 使用完后即放弃总线的使用权
      - 子周期2: 
        - 从模块申请占用总线, 将各种信息发送至总线上去
      - 特点:
        - 各个模块都有权申请占用总线
        - 采用同步方式通信, 不等对方回答
        - 各个模块准备数据时, 不占用总线
        - 总线被占用时, 无空闲